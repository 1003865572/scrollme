// ----------------------------------------------------------------------------------------------------
// ScrollMe
// A jQuery plugin for adding simple scrolling effects to web pages
// http://scrollme.nckprsn.com
// ----------------------------------------------------------------------------------------------------
(function(){$(function(){var h=$(document);var f=$(window);var m=0;var c=0;var o=0;var g=0;var j=-1;var a=[];var k=[];var e={opacity:1,translatex:0,translatey:0,translatez:0,rotatex:0,rotatey:0,rotatez:0,scale:1};var b=".animateme";var d=".scrollme";var n={linear:function(p){return p},easeout:function(p){return p*p*p},easein:function(p){p=1-p;return 1-(p*p*p)},easeinout:function(p){if(p<0.5){return(4*p*p*p)}else{p=1-p;return 1-(4*p*p*p)}}};var l=["ready","page:load","page:change"];init=function(){init_elements();on_resize();setInterval(update,10);f.on("resize orientationchange",function(){on_resize()});f.load(function(){setTimeout(function(){on_resize()},100)})};init_elements=function(){$(d).each(function(){var p={};p.element=$(this);var q=[];$(this).find(b).addBack(b).each(function(){var s={};s.element=$(this);s.when=s.element.data("when");s.from=s.element.data("from");s.to=s.element.data("to");if(s.element.is("[data-crop]")){s.crop=s.element.data("crop")}else{s.crop=true}if(s.element.is("[data-easing]")){s.easing=n[s.element.data("easing")]}else{s.easing=n.easeout}var r={};if(s.element.is("[data-opacity]")){r.opacity=s.element.data("opacity")}if(s.element.is("[data-translatex]")){r.translatex=s.element.data("translatex")}if(s.element.is("[data-translatey]")){r.translatey=s.element.data("translatey")}if(s.element.is("[data-translatez]")){r.translatez=s.element.data("translatez")}if(s.element.is("[data-rotatex]")){r.rotatex=s.element.data("rotatex")}if(s.element.is("[data-rotatey]")){r.rotatey=s.element.data("rotatey")}if(s.element.is("[data-rotatez]")){r.rotatez=s.element.data("rotatez")}if(s.element.is("[data-scale]")){r.scale=s.element.data("scale")}s.properties=r;q.push(s)});p.effects=q;a.push(p)})};update=function(){window.requestAnimationFrame(function(){update_viewport_position();if(j!=o){update_elements_in_view();animate()}j=o})};animate=function(){var I=k.length;for(var G=0;G<I;G++){var r=k[G];var p=r.effects.length;for(var J=0;J<p;J++){var C=r.effects[J];switch(C.when){case"view":case"span":var x=r.top-c;var v=r.bottom;break;case"exit":var x=r.bottom-c;var v=r.bottom;break;default:var x=r.top-c;var v=r.top;break}if(C.crop){if(x<0){x=0}if(v>(m-c)){v=m-c}}var q=(o-x)/(v-x);var D=C.from;var s=C.to;var w=s-D;var t=(q-D)/w;var B=C.easing(t);var u=animate_value(q,B,D,s,C,"opacity");var z=animate_value(q,B,D,s,C,"translatey");var A=animate_value(q,B,D,s,C,"translatex");var y=animate_value(q,B,D,s,C,"translatez");var H=animate_value(q,B,D,s,C,"rotatex");var F=animate_value(q,B,D,s,C,"rotatey");var E=animate_value(q,B,D,s,C,"rotatez");var K=animate_value(q,B,D,s,C,"scale");C.element.css({opacity:u,transform:"translate3d( "+A+"px , "+z+"px , "+y+"px ) rotateX( "+H+"deg ) rotateY( "+F+"deg ) rotateZ( "+E+"deg ) scale( "+K+" )"})}}};animate_value=function(t,s,u,v,y,x){var r=e[x];if(!(x in y.properties)){return r}var p=y.properties[x];var q=(v>u)?true:false;if(t<u&&q){return r}if(t>v&&q){return p}if(t>u&&!q){return r}if(t<v&&!q){return p}var w=r+(s*(p-r));switch(x){case"opacity":w=w.toFixed(2);break;case"translatex":w=w.toFixed(0);break;case"translatey":w=w.toFixed(0);break;case"translatez":w=w.toFixed(0);break;case"rotatex":w=w.toFixed(1);break;case"rotatey":w=w.toFixed(1);break;case"rotatez":w=w.toFixed(1);break;case"scale":w=w.toFixed(3);break;default:break}return w};update_viewport_position=function(){o=f.scrollTop();g=o+c};update_elements_in_view=function(){k=[];var q=a.length;for(var p=0;p<q;p++){if((a[p].top<g)&&(a[p].bottom>o)){k.push(a[p])}}};on_resize=function(){update_viewport();update_element_heights();update_viewport_position();update_elements_in_view();animate()};update_viewport=function(){m=h.height();c=f.height()};update_element_heights=function(){var r=a.length;for(var q=0;q<r;q++){var s=a[q].element.outerHeight();var p=a[q].element.offset();a[q].height=s;a[q].top=p.top;a[q].bottom=p.top+s}};var i=l.join(" ");h.on(i,function(){init()})})}).call(this);
